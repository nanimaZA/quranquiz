<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Surah Al-Fatiha Grammar Quiz</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0f0f0; padding: 20px; }
    .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1, h2, h3 { text-align: center; }
    .word-preview { display: flex; flex-direction: row; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px; }
    .word-box { padding: 10px; border-radius: 12px; color: white; min-width: 100px; text-align: center; font-size: 18px; line-height: 1.6; }
    .harf { background-color: #e67e22; }
    .fiil { background-color: #2ecc71; }
    .ism { background-color: #3498db; }
    .btn { padding: 6px 12px; border: none; border-radius: 6px; cursor: pointer; margin: 3px; }
    .btn:hover { opacity: 0.9; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Quran Quiz - 1 Surah Fatihah- The Opening</h1>
    <div id="preview"></div>
    <div id="score" style="text-align:center; font-size:18px; margin-top:10px;"></div>
    <div id="quiz"></div>
    <div id="summary"></div>
  </div>
  <script>
const wordsByAyah = [
  {
    "number": 1,
    "text": "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù Ø§Ù„Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙŽØ­ÙÙŠÙ…Ù",
    "words": [
      {
        "text": "Ø¨Ù",
        "grammar": "harf",
        "meaning": "In"
      },
      {
        "text": "Ø§Ø³Ù’Ù…Ù",
        "grammar": "ism",
        "meaning": "Name"
      },
      {
        "text": "Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù",
        "grammar": "ism",
        "meaning": "ALLAH"
      },
      {
        "text": "Ø§Ù„Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽÙ°Ù†Ù",
        "grammar": "ism",
        "meaning": "The Most Gracious"
      },
      {
        "text": "Ø§Ù„Ø±Ù‘ÙŽØ­ÙÙŠÙ…Ù",
        "grammar": "ism",
        "meaning": "The Most Merciful"
      }
    ],
    "translation": "In the name of Allah, the Most Gracious, the Most Merciful"
  },
  {
    "number": 2,
    "text": "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙŽÙ‡Ù Ø±ÙŽØ¨Ù‘Ù Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ",
    "words": [
      {
        "text": "Ø§Ù„Ù’Ø­ÙŽÙ…Ù’Ø¯Ù",
        "grammar": "ism",
        "meaning": "The Praise"
      },
      {
        "text": "Ù„Ù",
        "grammar": "harf",
        "meaning": "For"
      },
      {
        "text": "Ø§Ù„Ù„Ù‘ÙŽÙ‡Ù",
        "grammar": "ism",
        "meaning": "ALLAH"
      },
      {
        "text": "Ø±ÙŽØ¨Ù‘Ù",
        "grammar": "ism",
        "meaning": "Lord"
      },
      {
        "text": "Ø§Ù„Ù’Ø¹ÙŽØ§Ù„ÙŽÙ…ÙÙŠÙ†ÙŽ",
        "grammar": "ism",
        "meaning": "The Worlds"
      }
    ],
    "translation": "All praise is for Allah, Lord of the Worlds"
  },
  {
    "number": 3,
    "text": "Ø§Ù„Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽÙ°Ù†Ù Ø§Ù„Ø±Ù‘ÙŽØ­ÙÙŠÙ…Ù",
    "words": [
      {
        "text": "Ø§Ù„Ø±Ù‘ÙŽØ­Ù’Ù…ÙŽÙ°Ù†Ù",
        "grammar": "ism",
        "meaning": "The Most Gracious"
      },
      {
        "text": "Ø§Ù„Ø±Ù‘ÙŽØ­ÙÙŠÙ…Ù",
        "grammar": "ism",
        "meaning": "The Most Merciful"
      }
    ],
    "translation": "The Most Gracious, the Most Merciful"
  },
  {
    "number": 4,
    "text": "Ù…ÙŽØ§Ù„ÙÙƒÙ ÙŠÙŽÙˆÙ’Ù…Ù Ø§Ù„Ø¯Ù‘ÙÙŠÙ†Ù",
    "words": [
      {
        "text": "Ù…ÙŽØ§Ù„ÙÙƒÙ",
        "grammar": "ism",
        "meaning": "Master"
      },
      {
        "text": "ÙŠÙŽÙˆÙ’Ù…Ù",
        "grammar": "ism",
        "meaning": "Day"
      },
      {
        "text": "Ø§Ù„Ø¯Ù‘ÙÙŠÙ†Ù",
        "grammar": "ism",
        "meaning": "The Judgment"
      }
    ],
    "translation": "Master of the Day of Judgment"
  },
  {
    "number": 5,
    "text": "Ø¥ÙÙŠÙ‘ÙŽØ§ÙƒÙŽ Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù ÙˆÙŽØ¥ÙÙŠÙ‘ÙŽØ§ÙƒÙŽ Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù",
    "words": [
      {
        "text": "Ø¥ÙÙŠÙ‘ÙŽØ§",
        "grammar": "ism",
        "meaning": "alone"
      },
      {
        "text": "ÙƒÙŽ",
        "grammar": "ism",
        "meaning": "you"
      },
      {
        "text": "Ù†ÙŽØ¹Ù’Ø¨ÙØ¯Ù",
        "grammar": "fiil",
        "meaning": "we worship"
      },
      {
        "text": "ÙˆÙŽ",
        "grammar": "harf",
        "meaning": "and"
      },
      {
        "text": "Ø¥ÙÙŠÙ‘ÙŽØ§",
        "grammar": "ism",
        "meaning": "alone"
      },
      {
        "text": "ÙƒÙŽ",
        "grammar": "ism",
        "meaning": "you"
      },
      {
        "text": "Ù†ÙŽØ³Ù’ØªÙŽØ¹ÙÙŠÙ†Ù",
        "grammar": "fiil",
        "meaning": "we ask for help"
      }
    ],
    "translation": "You alone we worship, and You alone we ask for help"
  },
  {
    "number": 6,
    "text": "Ø§Ù‡Ù’Ø¯ÙÙ†ÙŽØ§ Ø§Ù„ØµÙ‘ÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ",
    "words": [
      {
        "text": "Ø§Ù‡Ù’Ø¯Ù",
        "grammar": "fiil",
        "meaning": "Guide"
      },
      {
        "text": "Ù†ÙŽØ§",
        "grammar": "ism",
        "meaning": "us"
      },
      {
        "text": "Ø§Ù„ØµÙ‘ÙØ±ÙŽØ§Ø·ÙŽ",
        "grammar": "ism",
        "meaning": "the path"
      },
      {
        "text": "Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙŽÙ‚ÙÙŠÙ…ÙŽ",
        "grammar": "ism",
        "meaning": "the straight"
      }
    ],
    "translation": "Guide us to the Straight Path"
  },
  {
    "number": 7,
    "text": "ØµÙØ±ÙŽØ§Ø·ÙŽ Ø§Ù„Ù‘ÙŽØ°ÙÙŠÙ†ÙŽ Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ØºÙŽÙŠÙ’Ø±Ù Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù Ø¹ÙŽÙ„ÙŽÙŠÙ’Ù‡ÙÙ…Ù’ ÙˆÙŽÙ„ÙŽØ§ Ø§Ù„Ø¶Ù‘ÙŽØ§Ù„Ù‘ÙÙŠÙ†ÙŽ",
    "words": [
      {
        "text": "ØµÙØ±ÙŽØ§Ø·ÙŽ",
        "grammar": "ism",
        "meaning": "path"
      },
      {
        "text": "Ø§Ù„Ù‘ÙŽØ°ÙÙŠÙ†ÙŽ",
        "grammar": "ism",
        "meaning": "those who"
      },
      {
        "text": "Ø£ÙŽÙ†Ù’Ø¹ÙŽÙ…Ù’ØªÙŽ",
        "grammar": "fiil",
        "meaning": "You blessed"
      },
      {
        "text": "Ø¹ÙŽÙ„ÙŽÙŠÙ’",
        "grammar": "harf",
        "meaning": "upon"
      },
      {
        "text": "Ù‡ÙÙ…Ù’",
        "grammar": "ism",
        "meaning": "them"
      },
      {
        "text": "ØºÙŽÙŠÙ’Ø±Ù",
        "grammar": "harf",
        "meaning": "not"
      },
      {
        "text": "Ø§Ù„Ù’Ù…ÙŽØºÙ’Ø¶ÙÙˆØ¨Ù",
        "grammar": "ism",
        "meaning": "those who earned wrath"
      },
      {
        "text": "Ø¹ÙŽÙ„ÙŽÙŠÙ’",
        "grammar": "harf",
        "meaning": "upon"
      },
      {
        "text": "Ù‡ÙÙ…Ù’",
        "grammar": "ism",
        "meaning": "them"
      },
      {
        "text": "ÙˆÙŽ",
        "grammar": "harf",
        "meaning": "and"
      },
{
        "text": "Ù„ÙŽØ§",
        "grammar": "harf",
        "meaning": "not"
      },
      {
        "text": "Ø§Ù„Ø¶Ù‘ÙŽØ§Ù„Ù‘ÙÙŠÙ†ÙŽ",
        "grammar": "ism",
        "meaning": "those who went astray"
      }
    ],
    "translation": "The path of those upon whom You have bestowed favor, not of those who have earned Your anger, nor of those who go astray"
  }
];

let currentAyahIndex = 0;
let currentWordIndex = 0;
let correctCount = 0;
let totalCorrect = 0;
let mistakes = [];
let ayahScores = [];

function showPreview() {
  const container = document.getElementById('preview');
  container.innerHTML = '';
  const ayah = wordsByAyah[currentAyahIndex];
  const title = document.createElement('h3');
  title.innerText = `Surah Al-Fatiha â€“ Ayah ${ayah.number} (Ù±Ù„Ù’ÙÙŽØ§ØªÙØ­ÙŽØ© Ø¢ÙŠØ© ${ayah.number})`;
  container.appendChild(title);

  const row = document.createElement('div');
  row.className = 'word-preview';
  row.style.direction = 'rtl';
  ayah.words.forEach(word => {
    const div = document.createElement('div');
    div.className = `word-box ${word.grammar}`;
    div.innerHTML = `<strong>${word.text}</strong><br><span style="text-transform: lowercase;">${word.grammar}</span><br><span>${word.meaning}</span>`;
    row.appendChild(div);
  });
  container.appendChild(row);

  const arabic = document.createElement('div');
  arabic.innerHTML = `<strong style='font-size: 24px;'>${ayah.text}</strong>`;
  arabic.style.textAlign = 'center';
  arabic.style.marginTop = '30px';
  container.appendChild(arabic);

  
  const translation = document.createElement('div');
  translation.innerHTML = `<em style='font-size: 18px;'>${ayah.translation}</em>`;
  translation.style.textAlign = 'center';
  translation.style.marginTop = '10px';
  translation.style.marginBottom = '30px';
  container.appendChild(translation);
    

  const startBtn = document.createElement('button');
  startBtn.innerText = 'Start Quiz';
  startBtn.className = 'btn';
  startBtn.style.marginTop = '20px';
  container.appendChild(startBtn);
  startBtn.onclick = () => {
    container.style.display = 'none';
    showQuiz();
  };
}

function showQuiz() {
  let grammarAnswered = false;
  let meaningAnswered = false;

  const quizContainer = document.getElementById('quiz');
  quizContainer.innerHTML = '';
  const ayah = wordsByAyah[currentAyahIndex];
  const word = ayah.words[currentWordIndex];

  const card = document.createElement('div');
  card.style.border = '1px solid #ccc';
  card.style.borderRadius = '10px';
  card.style.padding = '15px';
  card.style.marginBottom = '20px';
  card.innerHTML = `<h3 style='text-align:right;'>${word.text}</h3>`;

  const grammarQ = document.createElement('div');
  grammarQ.innerHTML = '<strong dir="ltr">What type of word is this?</strong><br>';
  ['ism', 'fiil', 'harf'].forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'btn';
    btn.innerText = opt;
    btn.onclick = () => {
      if (!btn.clicked) {
        btn.style.backgroundColor = opt === word.grammar ? '#2ecc71' : '#e74c3c';
        btn.clicked = true;
        grammarAnswered = true;
        if (opt === word.grammar) {
          correctCount++;
          totalCorrect++;
        } else {
          mistakes.push({ word: word.text, question: 'Grammar type', correct: word.grammar });
        }
        tryNextStep();
      }
    };
    grammarQ.appendChild(btn);
  });
  card.appendChild(grammarQ);

  const meaningQ = document.createElement('div');
  meaningQ.innerHTML = '<strong dir="ltr">What is the meaning of this word?</strong><br>';
  const options = shuffle([word.meaning, 'peace', 'truth', 'God']);
  options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'btn';
    btn.innerText = opt;
    btn.onclick = () => {
      if (!btn.clicked) {
        btn.style.backgroundColor = opt === word.meaning ? '#2ecc71' : '#e74c3c';
        btn.clicked = true;
        meaningAnswered = true;
        if (opt === word.meaning) {
          correctCount++;
          totalCorrect++;
        } else {
          mistakes.push({ word: word.text, question: 'Meaning', correct: word.meaning });
        }
        tryNextStep();
      }
    };
    meaningQ.appendChild(btn);
  });
  card.appendChild(meaningQ);

  quizContainer.appendChild(card);
  updateScore();

  function tryNextStep() {
    if (grammarAnswered && meaningAnswered) {
      setTimeout(() => {
        currentWordIndex++;
        if (currentWordIndex < ayah.words.length) {
          showQuiz();
        } else {
          document.getElementById('summary').innerHTML = '<h3>ðŸŽ‰ Well done! You completed Ayah ' + ayah.number + '!</h3>';
          ayahScores.push({ ayah: ayah.number, score: correctCount });
          currentWordIndex = 0;
          if (currentAyahIndex + 1 < wordsByAyah.length) {
            currentAyahIndex++;
            document.getElementById('quiz').innerHTML = '';
            document.getElementById('preview').style.display = 'block';
            showPreview();
          } else {
            showFinalSummary();
          }
        }
      }, 800);
    }
  }
}

function updateScore() {
  document.getElementById('score').innerText = `Total Score: ${totalCorrect}`;
}

function showFinalSummary() {
  let result = `<p>âœ… You have completed all ayahs!</p><p><strong>Total Correct:</strong> ${totalCorrect}</p><h4>Score by Ayah:</h4><ul>`;
  ayahScores.forEach(s => {
    result += `<li>Ayah ${s.ayah}: ${s.score} correct</li>`;
  });
  result += '</ul>';
  if (mistakes.length > 0) {
    result += '<h4>Mistakes:</h4><ul>';
    mistakes.forEach(m => {
      result += `<li><strong>${m.word}</strong>: ${m.question} should be <em>${m.correct}</em></li>`;
    });
    result += '</ul>';
  }
  result += '<button onclick="location.reload()">Retry</button>';
  result += '<button onclick="shareSummary()">Share</button>';
  document.getElementById('summary').innerHTML = result;
}

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function shareSummary() {
  const text = `I just completed the Surah Al-Fatiha grammar quiz! Total correct: ${totalCorrect}. Try it too!`;
  const url = encodeURIComponent(window.location.href);
  const shareText = encodeURIComponent(text);
  const wa = `https://wa.me/?text=${shareText}%20${url}`;
  const fb = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
  const tw = `https://twitter.com/intent/tweet?text=${shareText}&url=${url}`;
  const shareBox = document.createElement('div');
  shareBox.innerHTML = `<p>Share your results:</p>
    <a href='${wa}' target='_blank'>WhatsApp</a> |
    <a href='${fb}' target='_blank'>Facebook</a> |
    <a href='${tw}' target='_blank'>Twitter</a>`;
  document.getElementById('summary').appendChild(shareBox);
}

showPreview();
</script>
</body>
</html>
